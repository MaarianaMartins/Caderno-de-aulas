{
  "hash": "b87356f0807c9e367ec216841b34a71b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Aula3 - aprendendo a visualizar os dados\"\nformat: html\neditor: visual\neditor_options: \n  chunk_output_type: inline\nmessage: false \nwarning: false\n---\n\n\n# Importa os dados\n\no conjuto de dados está em uma página da web\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\ncr <- read_csv(\"https://raw.githubusercontent.com/emdelponte/paper-coffee-rust-Ethiopia/master/data/survey_clean.csv\")\n\nglimpse(cr)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 405\nColumns: 13\n$ farm            <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…\n$ region          <chr> \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", …\n$ zone            <chr> \"Bench Maji\", \"Bench Maji\", \"Bench Maji\", \"Bench Maji\"…\n$ district        <chr> \"Debub Bench\", \"Debub Bench\", \"Debub Bench\", \"Debub Be…\n$ lon             <dbl> 35.44250, 35.44250, 35.42861, 35.42861, 35.42861, 35.3…\n$ lat             <dbl> 6.904722, 6.904722, 6.904444, 6.904444, 6.904444, 6.90…\n$ altitude        <dbl> 1100, 1342, 1434, 1100, 1400, 1342, 1432, 1100, 1400, …\n$ cultivar        <chr> \"Local\", \"Mixture\", \"Mixture\", \"Local\", \"Local\", \"Mixt…\n$ shade           <chr> \"Sun\", \"Mid shade\", \"Mid shade\", \"Sun\", \"Sun\", \"Mid sh…\n$ cropping_system <chr> \"Plantation\", \"Plantation\", \"Plantation\", \"Plantation\"…\n$ farm_management <chr> \"Unmanaged\", \"Minimal\", \"Minimal\", \"Unmanaged\", \"Unman…\n$ inc             <dbl> 86.70805, 51.34354, 43.20000, 76.70805, 47.15808, 51.3…\n$ sev2            <dbl> 55.57986, 17.90349, 8.25120, 46.10154, 12.25167, 19.91…\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary (ggthemes)\ncr |> \n  ggplot (aes (x = sev2, fill = region)) + \n  geom_histogram( color = \"white\") + \n  facet_grid(region~cultivar) + \n  scale_fill_colorblind () +\n  theme_minimal(base_size = 12)+\n  theme (legend.position = \"bottom\") +\n  labs (y= \"Frequency\", \n        x= \"Severity(%)\", fill = \"Region\")\n```\n\n::: {.cell-output-display}\n![](aula3_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"crl.png\", bg = \"white\")\n\nsummary(cr$inc)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   9.50   19.43   32.50   34.89   48.20   86.71 \n```\n\n\n:::\n\n```{.r .cell-code}\ncr |> \n  group_by (region) |> \n  summarize (sev_med = median(sev2),\n             sev_mean = mean (sev2),\n             sev_sd = sd (sev2))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  region sev_med sev_mean sev_sd\n  <chr>    <dbl>    <dbl>  <dbl>\n1 Oromia    6.23     8.06   6.82\n2 SNNPR     4.88     9.81  10.5 \n```\n\n\n:::\n\n```{.r .cell-code}\ncr |> \n  ggplot (aes (inc, sev2)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](aula3_files/figure-html/unnamed-chunk-1-2.png){width=672}\n:::\n:::\n\n\n# Visualização\n\nvamos utilizar a bibilbioteca ggplot para visualizar os dados\n\n#cria subconjuntos uTILIZA AS FUNÇÕES \"SELECT\" E \"FILTER\" DO PACOTE **dplyr** para selecionar colunas e linhas, respectivamente.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#filtra oromia \n\ncr_oromia <- cr|>\n  select (farm, region, cultivar, sev2) |>\n  filter(region == \"Oromia\")\ncr_oromia\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 165 × 4\n    farm region cultivar  sev2\n   <dbl> <chr>  <chr>    <dbl>\n 1   286 Oromia Mixture   7.63\n 2   287 Oromia Mixture   9.39\n 3   288 Oromia Mixture   1.30\n 4   289 Oromia Mixture   9.79\n 5   290 Oromia Local    18.5 \n 6   291 Oromia Mixture  13.2 \n 7   292 Oromia Mixture   5.60\n 8   293 Oromia Mixture   1.06\n 9   294 Oromia Local    17.6 \n10   295 Oromia Mixture  15.4 \n# ℹ 155 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\n#filtra SNNPR\ncr_pr <- cr |> \n  select (farm, region, cultivar, sev2) |>\n  filter (region == \"SNNPR\")\ncr_pr\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 240 × 4\n    farm region cultivar  sev2\n   <dbl> <chr>  <chr>    <dbl>\n 1     1 SNNPR  Local    55.6 \n 2     2 SNNPR  Mixture  17.9 \n 3     3 SNNPR  Mixture   8.25\n 4     4 SNNPR  Local    46.1 \n 5     5 SNNPR  Local    12.3 \n 6     6 SNNPR  Mixture  19.9 \n 7     7 SNNPR  Mixture  11.9 \n 8     8 SNNPR  Local    55.6 \n 9     9 SNNPR  Local    11.6 \n10    10 SNNPR  Mixture  11.4 \n# ℹ 230 more rows\n```\n\n\n:::\n:::\n\n\n##Visuzaliza os subconjuntos\n\nGráfico ggplot para cada subconjunto\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- cr_oromia |> \n  ggplot (aes(cultivar, sev2, \n              fill = cultivar))+\n  geom_boxplot()+\n  scale_fill_few () +\n  labs (y = \"Severity (%)\",\n      x= \"\")+\n  coord_flip()\n\np2 <- cr_pr |> \n  ggplot (aes(cultivar, sev2,\n              fill = cultivar)) +\n  geom_boxplot() +\n  scale_fill_few () +\n  labs (y= \"Severity (%)\",\n        x= \"\")+\n  coord_flip()\np1\n```\n\n::: {.cell-output-display}\n![](aula3_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\np2\n```\n\n::: {.cell-output-display}\n![](aula3_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\nlibrary(patchwork)\n\n(p1 / p2) + \nplot_layout(guides = \"collect\",\n            axes = \"collect\") +\n  plot_annotation(title = \"Coffe rust in Ethiopia\", \n                  caption = \"source: Del Ponte (2022)\")\n```\n\n::: {.cell-output-display}\n![](aula3_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"patchl.png\", bg = \"white\",\n       width = 6,\n       height = 4)\n\np3 <- cr_oromia |> \n  ggplot (aes(x = sev2))+\n  geom_histogram()\n\np1 + inset_element(p3, left = 0.6, bottom = 0.6, right = 1, top = 1)\n```\n\n::: {.cell-output-display}\n![](aula3_files/figure-html/unnamed-chunk-3-4.png){width=672}\n:::\n\n```{.r .cell-code}\n#se colocar a o sinal de + e a barra |, também vai. Se colocar a barra / coloca um embaixo do outro\n#usa o coord_flip para girar as coordenadas do gráfico \n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}